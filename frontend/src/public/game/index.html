<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battleship Game</title>
    
    <link rel="stylesheet" href="/global/global.css"> 
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="game.css">
    <link rel="stylesheet" href="setup.css">
    <link rel="stylesheet" href="multiplayer.css">
</head>
<body>
    <!-- MULTIPLAYER LOBBY: Create or Join Game -->
    <div id="lobby-screen" class="screen">
        <div class="lobby-container">
            <h1>‚öì Battleship Multiplayer</h1>
            <div class="lobby-options">
                <div class="lobby-option">
                    <h2>üéÆ Crear Partida</h2>
                    <input type="text" id="create-player-name" placeholder="Tu nombre" maxlength="20" />
                    <button id="create-game-btn" class="btn-primary">Crear Sala</button>
                </div>
                <div class="lobby-divider">O</div>
                <div class="lobby-option">
                    <h2>üîó Unirse a Partida</h2>
                    <input type="text" id="join-player-name" placeholder="Tu nombre" maxlength="20" />
                    <input type="text" id="join-game-code" placeholder="C√≥digo de sala (ej: ABC123)" maxlength="6" style="text-transform: uppercase" />
                    <button id="join-game-btn" class="btn-primary">Unirse</button>
                </div>
            </div>
            <div class="lobby-message" id="lobby-message"></div>
        </div>
    </div>

    <!-- WAITING ROOM: Waiting for opponent -->
    <div id="waiting-screen" class="screen" style="display: none;">
        <div class="waiting-container">
            <h1>‚è≥ Esperando Oponente</h1>
            <div class="game-code-display">
                <p>C√≥digo de Sala:</p>
                <h2 id="display-game-code">------</h2>
                <button id="copy-code-btn" class="btn-secondary">üìã Copiar C√≥digo</button>
            </div>
            <div class="waiting-info">
                <p>Comparte este c√≥digo con tu oponente para que se una a la partida.</p>
                <div class="loading-spinner">
                    <div class="spinner"></div>
                    <p>Esperando a que el jugador 2 se una...</p>
                </div>
            </div>
            <button id="cancel-waiting-btn" class="btn-danger">Cancelar</button>
        </div>
    </div>

    <!-- SETUP SCREEN: Place ships -->
    <div id="setup-screen" class="screen" style="display: none;">
        <div class="setup-header">
            <h1>‚öì Coloca tus Barcos</h1>
            <div class="opponent-status">
                <span id="opponent-name">Esperando...</span>
                <span id="opponent-ready-status" class="status-badge">‚è≥ No listo</span>
            </div>
        </div>
        <div class="setup-container">
            <div class="setup-left">
                <div class="ships-pool-container">
                    <h3>üè¥‚Äç‚ò†Ô∏è Barcos Disponibles</h3>
                    <div class="ships-pool" id="ships-pool"></div>
                </div>
                <div class="setup-instructions">
                    <h4>Instrucciones:</h4>
                    <ol>
                        <li>Arrastra los barcos a tu tablero</li>
                        <li>Cambia la orientaci√≥n si lo necesitas</li>
                        <li>Coloca todos los barcos para continuar</li>
                        <li>¬°Planifica estrat√©gicamente!</li>
                    </ol>
                </div>
            </div>
            <div class="setup-right">
                <div class="board-container">
                    <h3>üåä Tu Tablero</h3>
                    <div class="setup-board" id="setup-board"></div>
                </div>
                <div class="setup-controls">
                    <button id="toggle-orientation-btn" class="btn-secondary">
                        <span class="icon">‚Üª</span> <span id="orientation-text">Horizontal</span>
                    </button>
                    <button id="random-place-btn" class="btn-secondary">
                        <span class="icon">üé≤</span> Aleatorio
                    </button>
                    <button id="clear-ships-btn" class="btn-danger">
                        <span class="icon">üóëÔ∏è</span> Limpiar Todo
                    </button>
                </div>
                <div class="setup-progress">
                    <div class="progress-bar">
                        <div id="setup-progress" class="progress-fill"></div>
                    </div>
                    <span id="ships-placed-count">0/5 barcos colocados</span>
                </div>
                <button id="start-game-btn" class="btn-primary" disabled>
                    <span class="icon">‚öîÔ∏è</span> Iniciar Batalla
                </button>
            </div>
        </div>
    </div>

    <!-- GAME SCREEN: Play the game -->
    <div id="game-screen" class="screen" style="display: none;">
        <div class="game-header">
            <div class="player-info">
                <div class="player-identity">
                    <span id="player-name">Jugador</span>
                    <span class="vs-text">VS</span>
                    <span id="opponent-player-name">Oponente</span>
                </div>
                <div class="player-status-indicator">
                    <span id="player-status">Es tu turno</span>
                </div>
            </div>
            <div class="game-info">
                <div class="info-box">
                    <span class="info-label">Turno:</span>
                    <span id="turn-counter" class="info-value">1</span>
                </div>
                <div class="info-box">
                    <span class="info-label">Intentos:</span>
                    <span id="attempts-count" class="info-value">0</span>
                </div>
                <div class="info-box">
                    <span class="info-label">Hundidos:</span>
                    <span id="ships-sunk" class="info-value">0/5</span>
                </div>
                <div class="info-box">
                    <span class="info-label">Estado:</span>
                    <span id="game-status" class="info-value">En juego</span>
                </div>
            </div>
        </div>
        <div class="game-boards">
            <div class="board-container">
                <h3>üåä Tu Flota</h3>
                <div class="board" id="player-board"></div>
                <div class="board-stats">
                    <div class="stat">
                        <span class="stat-label">Barcos restantes:</span>
                        <span id="player-ships-remaining" class="stat-value">5</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Impactos recibidos:</span>
                        <span id="player-hits-taken" class="stat-value">0</span>
                    </div>
                </div>
            </div>
            <div class="vs-separator">
                <div class="vs-circle">VS</div>
            </div>
            <div class="board-container">
                <h3>üéØ Tablero Enemigo</h3>
                <div class="board" id="opponent-board"></div>
                <div class="board-stats">
                    <div class="stat">
                        <span class="stat-label">Barcos enemigos:</span>
                        <span id="opponent-ships-remaining" class="stat-value">5</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Impactos dados:</span>
                        <span id="player-hits-given" class="stat-value">0</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="game-controls">
            <div class="message-container">
                <div class="message" id="game-message"></div>
            </div>
            <div class="control-buttons">
                <button id="surrender-btn" class="btn-danger">
                    <span class="icon">üè≥Ô∏è</span> Rendirse
                </button>
                <button id="new-game-btn" class="btn-secondary" style="display: none;">
                    <span class="icon">üÜï</span> Nueva Partida
                </button>
            </div>
        </div>
    </div>

    <!-- Include the modular game script -->
    <script type="module" src="game.js"></script>
</body>
</html>
